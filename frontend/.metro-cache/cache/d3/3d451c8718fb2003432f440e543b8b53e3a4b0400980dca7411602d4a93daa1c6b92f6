{"dependencies":[{"name":"./timeoutManager","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":3,"column":0,"index":10},"end":{"line":3,"column":55,"index":65}}],"key":"H917YFIYMd+uPVf8ybPiIW/q9Ro="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createNotifyManager = createNotifyManager;\n  exports.notifyManager = exports.defaultScheduler = void 0;\n  var _timeoutManager = require(_dependencyMap[0], \"./timeoutManager\");\n  // TYPES\n\n  var defaultScheduler = exports.defaultScheduler = _timeoutManager.systemSetTimeoutZero;\n  function createNotifyManager() {\n    var queue = [];\n    var transactions = 0;\n    var notifyFn = callback => {\n      callback();\n    };\n    var batchNotifyFn = callback => {\n      callback();\n    };\n    var scheduleFn = defaultScheduler;\n    var schedule = callback => {\n      if (transactions) {\n        queue.push(callback);\n      } else {\n        scheduleFn(() => {\n          notifyFn(callback);\n        });\n      }\n    };\n    var flush = () => {\n      var originalQueue = queue;\n      queue = [];\n      if (originalQueue.length) {\n        scheduleFn(() => {\n          batchNotifyFn(() => {\n            originalQueue.forEach(callback => {\n              notifyFn(callback);\n            });\n          });\n        });\n      }\n    };\n    return {\n      batch: callback => {\n        var result;\n        transactions++;\n        try {\n          result = callback();\n        } finally {\n          transactions--;\n          if (!transactions) {\n            flush();\n          }\n        }\n        return result;\n      },\n      /**\n       * All calls to the wrapped function will be batched.\n       */\n      batchCalls: callback => {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          schedule(() => {\n            callback(...args);\n          });\n        };\n      },\n      schedule,\n      /**\n       * Use this method to set a custom notify function.\n       * This can be used to for example wrap notifications with `React.act` while running tests.\n       */\n      setNotifyFunction: fn => {\n        notifyFn = fn;\n      },\n      /**\n       * Use this method to set a custom function to batch notifications together into a single tick.\n       * By default React Query will use the batch function provided by ReactDOM or React Native.\n       */\n      setBatchNotifyFunction: fn => {\n        batchNotifyFn = fn;\n      },\n      setScheduler: fn => {\n        scheduleFn = fn;\n      }\n    };\n  }\n\n  // SINGLETON\n  var notifyManager = exports.notifyManager = createNotifyManager();\n});","lineCount":93,"map":[[7,2,3,0],[7,6,3,0,"_timeoutManager"],[7,21,3,0],[7,24,3,0,"require"],[7,31,3,0],[7,32,3,0,"_dependencyMap"],[7,46,3,0],[8,2,1,0],[10,2,15,7],[10,6,15,13,"defaultScheduler"],[10,22,15,47],[10,25,15,47,"exports"],[10,32,15,47],[10,33,15,47,"defaultScheduler"],[10,49,15,47],[10,52,15,50,"systemSetTimeoutZero"],[10,88,15,70],[11,2,17,7],[11,11,17,16,"createNotifyManager"],[11,30,17,35,"createNotifyManager"],[11,31,17,35],[11,33,17,38],[12,4,18,2],[12,8,18,6,"queue"],[12,13,18,34],[12,16,18,37],[12,18,18,39],[13,4,19,2],[13,8,19,6,"transactions"],[13,20,19,18],[13,23,19,21],[13,24,19,22],[14,4,20,2],[14,8,20,6,"notifyFn"],[14,16,20,30],[14,19,20,34,"callback"],[14,27,20,42],[14,31,20,47],[15,6,21,4,"callback"],[15,14,21,12],[15,15,21,13],[15,16,21,14],[16,4,22,2],[16,5,22,3],[17,4,23,2],[17,8,23,6,"batchNotifyFn"],[17,21,23,40],[17,24,23,44,"callback"],[17,32,23,64],[17,36,23,69],[18,6,24,4,"callback"],[18,14,24,12],[18,15,24,13],[18,16,24,14],[19,4,25,2],[19,5,25,3],[20,4,26,2],[20,8,26,6,"scheduleFn"],[20,18,26,16],[20,21,26,19,"defaultScheduler"],[20,37,26,35],[21,4,28,2],[21,8,28,8,"schedule"],[21,16,28,16],[21,19,28,20,"callback"],[21,27,28,44],[21,31,28,55],[22,6,29,4],[22,10,29,8,"transactions"],[22,22,29,20],[22,24,29,22],[23,8,30,6,"queue"],[23,13,30,11],[23,14,30,12,"push"],[23,18,30,16],[23,19,30,17,"callback"],[23,27,30,25],[23,28,30,26],[24,6,31,4],[24,7,31,5],[24,13,31,11],[25,8,32,6,"scheduleFn"],[25,18,32,16],[25,19,32,17],[25,25,32,23],[26,10,33,8,"notifyFn"],[26,18,33,16],[26,19,33,17,"callback"],[26,27,33,25],[26,28,33,26],[27,8,34,6],[27,9,34,7],[27,10,34,8],[28,6,35,4],[29,4,36,2],[29,5,36,3],[30,4,37,2],[30,8,37,8,"flush"],[30,13,37,13],[30,16,37,16,"flush"],[30,17,37,16],[30,22,37,28],[31,6,38,4],[31,10,38,10,"originalQueue"],[31,23,38,23],[31,26,38,26,"queue"],[31,31,38,31],[32,6,39,4,"queue"],[32,11,39,9],[32,14,39,12],[32,16,39,14],[33,6,40,4],[33,10,40,8,"originalQueue"],[33,23,40,21],[33,24,40,22,"length"],[33,30,40,28],[33,32,40,30],[34,8,41,6,"scheduleFn"],[34,18,41,16],[34,19,41,17],[34,25,41,23],[35,10,42,8,"batchNotifyFn"],[35,23,42,21],[35,24,42,22],[35,30,42,28],[36,12,43,10,"originalQueue"],[36,25,43,23],[36,26,43,24,"forEach"],[36,33,43,31],[36,34,43,33,"callback"],[36,42,43,41],[36,46,43,46],[37,14,44,12,"notifyFn"],[37,22,44,20],[37,23,44,21,"callback"],[37,31,44,29],[37,32,44,30],[38,12,45,10],[38,13,45,11],[38,14,45,12],[39,10,46,8],[39,11,46,9],[39,12,46,10],[40,8,47,6],[40,9,47,7],[40,10,47,8],[41,6,48,4],[42,4,49,2],[42,5,49,3],[43,4,51,2],[43,11,51,9],[44,6,52,4,"batch"],[44,11,52,9],[44,13,52,15,"callback"],[44,21,52,32],[44,25,52,40],[45,8,53,6],[45,12,53,10,"result"],[45,18,53,16],[46,8,54,6,"transactions"],[46,20,54,18],[46,22,54,20],[47,8,55,6],[47,12,55,10],[48,10,56,8,"result"],[48,16,56,14],[48,19,56,17,"callback"],[48,27,56,25],[48,28,56,26],[48,29,56,27],[49,8,57,6],[49,9,57,7],[49,18,57,16],[50,10,58,8,"transactions"],[50,22,58,20],[50,24,58,22],[51,10,59,8],[51,14,59,12],[51,15,59,13,"transactions"],[51,27,59,25],[51,29,59,27],[52,12,60,10,"flush"],[52,17,60,15],[52,18,60,16],[52,19,60,17],[53,10,61,8],[54,8,62,6],[55,8,63,6],[55,15,63,13,"result"],[55,21,63,19],[56,6,64,4],[56,7,64,5],[57,6,65,4],[58,0,66,0],[59,0,67,0],[60,6,68,4,"batchCalls"],[60,16,68,14],[60,18,69,6,"callback"],[60,26,69,37],[60,30,70,32],[61,8,71,6],[61,15,71,13],[61,27,71,26],[62,10,71,26],[62,19,71,26,"_len"],[62,23,71,26],[62,26,71,26,"arguments"],[62,35,71,26],[62,36,71,26,"length"],[62,42,71,26],[62,44,71,17,"args"],[62,48,71,21],[62,55,71,21,"Array"],[62,60,71,21],[62,61,71,21,"_len"],[62,65,71,21],[62,68,71,21,"_key"],[62,72,71,21],[62,78,71,21,"_key"],[62,82,71,21],[62,85,71,21,"_len"],[62,89,71,21],[62,91,71,21,"_key"],[62,95,71,21],[63,12,71,17,"args"],[63,16,71,21],[63,17,71,21,"_key"],[63,21,71,21],[63,25,71,21,"arguments"],[63,34,71,21],[63,35,71,21,"_key"],[63,39,71,21],[64,10,71,21],[65,10,72,8,"schedule"],[65,18,72,16],[65,19,72,17],[65,25,72,23],[66,12,73,10,"callback"],[66,20,73,18],[66,21,73,19],[66,24,73,22,"args"],[66,28,73,26],[66,29,73,27],[67,10,74,8],[67,11,74,9],[67,12,74,10],[68,8,75,6],[68,9,75,7],[69,6,76,4],[69,7,76,5],[70,6,77,4,"schedule"],[70,14,77,12],[71,6,78,4],[72,0,79,0],[73,0,80,0],[74,0,81,0],[75,6,82,4,"setNotifyFunction"],[75,23,82,21],[75,25,82,24,"fn"],[75,27,82,42],[75,31,82,47],[76,8,83,6,"notifyFn"],[76,16,83,14],[76,19,83,17,"fn"],[76,21,83,19],[77,6,84,4],[77,7,84,5],[78,6,85,4],[79,0,86,0],[80,0,87,0],[81,0,88,0],[82,6,89,4,"setBatchNotifyFunction"],[82,28,89,26],[82,30,89,29,"fn"],[82,32,89,52],[82,36,89,57],[83,8,90,6,"batchNotifyFn"],[83,21,90,19],[83,24,90,22,"fn"],[83,26,90,24],[84,6,91,4],[84,7,91,5],[85,6,92,4,"setScheduler"],[85,18,92,16],[85,20,92,19,"fn"],[85,22,92,39],[85,26,92,44],[86,8,93,6,"scheduleFn"],[86,18,93,16],[86,21,93,19,"fn"],[86,23,93,21],[87,6,94,4],[88,4,95,2],[88,5,95,3],[89,2,96,0],[91,2,98,0],[92,2,99,7],[92,6,99,13,"notifyManager"],[92,19,99,26],[92,22,99,26,"exports"],[92,29,99,26],[92,30,99,26,"notifyManager"],[92,43,99,26],[92,46,99,29,"createNotifyManager"],[92,65,99,48],[92,66,99,49],[92,67,99,50],[93,0,99,50],[93,3]],"functionMap":{"names":["<global>","createNotifyManager","notifyFn","batchNotifyFn","schedule","scheduleFn$argument_0","flush","batchNotifyFn$argument_0","originalQueue.forEach$argument_0","batch","batchCalls","<anonymous>","schedule$argument_0","setNotifyFunction","setBatchNotifyFunction","setScheduler"],"mappings":"AAA;OCgB;iCCG;GDE;2CEC;GFE;mBGG;iBCI;ODE;GHE;gBKC;iBDI;sBEC;gCCC;WDE;SFC;OCC;GLE;WQG;KRY;gBSI;aCG;iBCC;SDE;ODC;KTC;uBYM;KZE;4BaK;KbE;kBcC;KdE;CDE"}},"type":"js/module"}]}