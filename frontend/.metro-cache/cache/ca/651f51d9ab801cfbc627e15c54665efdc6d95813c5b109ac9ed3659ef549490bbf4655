{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":40,"column":0,"index":971}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":40,"column":0,"index":971}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":40,"column":0,"index":971}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseBase","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":40,"column":0,"index":971}}],"key":"jMONaMrLKWyW98OXtOcLrGqurmM="}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseKey","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":40,"column":0,"index":971}}],"key":"qTmzI90+V4e5n8oYrMtPGytmrV0="}},{"name":"./timeoutManager","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"H917YFIYMd+uPVf8ybPiIW/q9Ro="}},{"name":"./utils","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":50,"index":100}}],"key":"FH4oXkS7WdR5kG0v+Eku8TWcu80="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Removable = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _classPrivateFieldLooseBase2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/classPrivateFieldLooseBase\"));\n  var _classPrivateFieldLooseKey2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/classPrivateFieldLooseKey\"));\n  var _timeoutManager = require(_dependencyMap[5], \"./timeoutManager\");\n  var _utils = require(_dependencyMap[6], \"./utils\");\n  var _gcTimeout = /*#__PURE__*/(0, _classPrivateFieldLooseKey2.default)(\"gcTimeout\");\n  var Removable = exports.Removable = /*#__PURE__*/function () {\n    function Removable() {\n      (0, _classCallCheck2.default)(this, Removable);\n      Object.defineProperty(this, _gcTimeout, {\n        writable: true,\n        value: void 0\n      });\n    }\n    return (0, _createClass2.default)(Removable, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.clearGcTimeout();\n      }\n    }, {\n      key: \"scheduleGc\",\n      value: function scheduleGc() {\n        this.clearGcTimeout();\n        if ((0, _utils.isValidTimeout)(this.gcTime)) {\n          (0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout] = _timeoutManager.timeoutManager.setTimeout(() => {\n            this.optionalRemove();\n          }, this.gcTime);\n        }\n      }\n    }, {\n      key: \"updateGcTime\",\n      value: function updateGcTime(newGcTime) {\n        // Default to 5 minutes (Infinity for server-side) if no gcTime is set\n        this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utils.isServer ? Infinity : 5 * 60 * 1000));\n      }\n    }, {\n      key: \"clearGcTimeout\",\n      value: function clearGcTimeout() {\n        if ((0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout]) {\n          _timeoutManager.timeoutManager.clearTimeout((0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout]);\n          (0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout] = undefined;\n        }\n      }\n    }]);\n  }();\n});","lineCount":53,"map":[[11,2,1,0],[11,6,1,0,"_timeoutManager"],[11,21,1,0],[11,24,1,0,"require"],[11,31,1,0],[11,32,1,0,"_dependencyMap"],[11,46,1,0],[12,2,2,0],[12,6,2,0,"_utils"],[12,12,2,0],[12,15,2,0,"require"],[12,22,2,0],[12,23,2,0,"_dependencyMap"],[12,37,2,0],[13,2,2,50],[13,6,2,50,"_gcTimeout"],[13,16,2,50],[13,36,2,50,"_classPrivateFieldLooseKey2"],[13,63,2,50],[13,64,2,50,"default"],[13,71,2,50],[14,2,2,50],[14,6,5,22,"Removable"],[14,15,5,31],[14,18,5,31,"exports"],[14,25,5,31],[14,26,5,31,"Removable"],[14,35,5,31],[15,4,5,31],[15,13,5,31,"Removable"],[15,23,5,31],[16,6,5,31],[16,10,5,31,"_classCallCheck2"],[16,26,5,31],[16,27,5,31,"default"],[16,34,5,31],[16,42,5,31,"Removable"],[16,51,5,31],[17,6,5,31,"Object"],[17,12,5,31],[17,13,5,31,"defineProperty"],[17,27,5,31],[17,34,5,31,"_gcTimeout"],[17,44,5,31],[18,8,5,31,"writable"],[18,16,5,31],[19,8,5,31,"value"],[19,13,5,31],[20,6,5,31],[21,4,5,31],[22,4,5,31],[22,15,5,31,"_createClass2"],[22,28,5,31],[22,29,5,31,"default"],[22,36,5,31],[22,38,5,31,"Removable"],[22,47,5,31],[23,6,5,31,"key"],[23,9,5,31],[24,6,5,31,"value"],[24,11,5,31],[24,13,9,2],[24,22,9,2,"destroy"],[24,29,9,9,"destroy"],[24,30,9,9],[24,32,9,18],[25,8,10,4],[25,12,10,8],[25,13,10,9,"clearGcTimeout"],[25,27,10,23],[25,28,10,24],[25,29,10,25],[26,6,11,2],[27,4,11,3],[28,6,11,3,"key"],[28,9,11,3],[29,6,11,3,"value"],[29,11,11,3],[29,13,13,2],[29,22,13,12,"scheduleGc"],[29,32,13,22,"scheduleGc"],[29,33,13,22],[29,35,13,31],[30,8,14,4],[30,12,14,8],[30,13,14,9,"clearGcTimeout"],[30,27,14,23],[30,28,14,24],[30,29,14,25],[31,8,16,4],[31,12,16,8],[31,16,16,8,"isValidTimeout"],[31,37,16,22],[31,39,16,23],[31,43,16,27],[31,44,16,28,"gcTime"],[31,50,16,34],[31,51,16,35],[31,53,16,37],[32,10,17,6],[32,14,17,6,"_classPrivateFieldLooseBase2"],[32,42,17,6],[32,43,17,6,"default"],[32,50,17,6],[32,56,17,10],[32,58,17,10,"_gcTimeout"],[32,68,17,10],[32,70,17,10,"_gcTimeout"],[32,80,17,10],[32,84,17,24,"timeoutManager"],[32,114,17,38],[32,115,17,39,"setTimeout"],[32,125,17,49],[32,126,17,50],[32,132,17,56],[33,12,18,8],[33,16,18,12],[33,17,18,13,"optionalRemove"],[33,31,18,27],[33,32,18,28],[33,33,18,29],[34,10,19,6],[34,11,19,7],[34,13,19,9],[34,17,19,13],[34,18,19,14,"gcTime"],[34,24,19,20],[34,25,19,21],[35,8,20,4],[36,6,21,2],[37,4,21,3],[38,6,21,3,"key"],[38,9,21,3],[39,6,21,3,"value"],[39,11,21,3],[39,13,23,2],[39,22,23,12,"updateGcTime"],[39,34,23,24,"updateGcTime"],[39,35,23,25,"newGcTime"],[39,44,23,54],[39,46,23,62],[40,8,24,4],[41,8,25,4],[41,12,25,8],[41,13,25,9,"gcTime"],[41,19,25,15],[41,22,25,18,"Math"],[41,26,25,22],[41,27,25,23,"max"],[41,30,25,26],[41,31,26,6],[41,35,26,10],[41,36,26,11,"gcTime"],[41,42,26,17],[41,46,26,21],[41,47,26,22],[41,49,27,6,"newGcTime"],[41,58,27,15],[41,63,27,20,"isServer"],[41,78,27,28],[41,81,27,31,"Infinity"],[41,89,27,39],[41,92,27,42],[41,93,27,43],[41,96,27,46],[41,98,27,48],[41,101,27,51],[41,105,27,55],[41,106,28,4],[41,107,28,5],[42,6,29,2],[43,4,29,3],[44,6,29,3,"key"],[44,9,29,3],[45,6,29,3,"value"],[45,11,29,3],[45,13,31,2],[45,22,31,12,"clearGcTimeout"],[45,36,31,26,"clearGcTimeout"],[45,37,31,26],[45,39,31,29],[46,8,32,4],[46,16,32,4,"_classPrivateFieldLooseBase2"],[46,44,32,4],[46,45,32,4,"default"],[46,52,32,4],[46,54,32,8],[46,58,32,12],[46,60,32,12,"_gcTimeout"],[46,70,32,12],[46,72,32,12,"_gcTimeout"],[46,82,32,12],[46,85,32,25],[47,10,33,6,"timeoutManager"],[47,40,33,20],[47,41,33,21,"clearTimeout"],[47,53,33,33],[47,58,33,33,"_classPrivateFieldLooseBase2"],[47,86,33,33],[47,87,33,33,"default"],[47,94,33,33],[47,96,33,34],[47,100,33,38],[47,102,33,38,"_gcTimeout"],[47,112,33,38],[47,114,33,38,"_gcTimeout"],[47,124,33,38],[47,125,33,49],[47,126,33,50],[48,10,34,6],[48,14,34,6,"_classPrivateFieldLooseBase2"],[48,42,34,6],[48,43,34,6,"default"],[48,50,34,6],[48,56,34,10],[48,58,34,10,"_gcTimeout"],[48,68,34,10],[48,70,34,10,"_gcTimeout"],[48,80,34,10],[48,84,34,24,"undefined"],[48,93,34,33],[49,8,35,4],[50,6,36,2],[51,4,36,3],[52,2,36,3],[53,0,36,3],[53,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","timeoutManager.setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;OCI;ECI;GDE;EEE;kDCI;ODE;GFE;EIE;GJM;EKE;GLK;CDG"}},"type":"js/module"}]}